{% load humanize %}

<div class="space-y-3">
    {% if tile.data._error %}
    <div class="text-sm text-red-600 dark:text-red-400">
        <i class="fas fa-exclamation-triangle mr-1"></i>
        {{ tile.data._error }}
    </div>
    
    {% elif tile.data.restricted %}
    <div class="text-center py-4">
        <i class="fas fa-lock text-gray-400 text-2xl mb-2"></i>
        <p class="text-sm text-gray-500 dark:text-gray-400">Access restricted</p>
    </div>
    
    {% else %}
        {% with key=tile.key %}
            {% if key == 'sales' and tile.data.show_detailed %}
            <div class="grid grid-cols-2 gap-2 text-sm">
                <div class="text-center p-2 bg-green-50 dark:bg-green-900/20 rounded">
                    <div class="font-semibold text-green-700 dark:text-green-300">{{ tile.data.purchases_today }}</div>
                    <div class="text-xs text-green-600 dark:text-green-400">Today</div>
                </div>
                <div class="text-center p-2 bg-blue-50 dark:bg-blue-900/20 rounded">
                    <div class="font-semibold text-blue-700 dark:text-blue-300">{{ tile.data.pending_count }}</div>
                    <div class="text-xs text-blue-600 dark:text-blue-400">Pending</div>
                </div>
            </div>
            {% endif %}
            
            {% if key == 'finance' and tile.data.show_detailed %}
            <div class="text-center py-2">
                <div class="text-2xl font-bold text-gray-900 dark:text-white">
                    UGX {{ tile.data.total_payable|intcomma }}
                </div>
                <div class="text-xs text-gray-500 dark:text-gray-400">Total Payable</div>
            </div>
            {% endif %}
            
            {% if key == 'quality' and tile.data.show_detailed %}
            <div class="flex justify-between items-center text-sm">
                <span class="text-green-600 dark:text-green-400">
                    ✓ {{ tile.data.accepted_today }} accepted
                </span>
                <span class="text-red-600 dark:text-red-400">
                    ✗ {{ tile.data.rejected_today }} rejected
                </span>
            </div>
            {% endif %}
        {% endwith %}
    {% endif %}
</div>